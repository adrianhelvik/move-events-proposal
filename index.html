<!doctype html>
<head>
  <meta charset="utf-8">
<style>
body > :first-child {
  font-family: sans-serif;
}
.outer .inner {
  background: #ddd;
  padding: 20px;
}
</style>
</head>
<body>
  <div class="outer">
    <div class="inner">
      Drag me!
    </div>
  </div>
  <script type="module">
    import { polyfill } from './src/index.js'

    polyfill()

    const div = document.querySelector('div')

    div.moveHandler = class Move {
      onStart(event) {
        event.preventDefault()
        this.snapshot = document.createSnapshot(this.element)
        this.element.style.opacity = 0
        this.snapshot.place({
          x: event.snapshotX,
          y: event.snapshotY
        })
      }

      onMove(event) {
        this.snapshot.move({
          x: event.snapshotX,
          y: event.snapshotY,
        })
      }

      onEnd(event) {
        this.element.style.opacity = 1
        this.snapshot.remove()
      }
    }
  </script>
</body>
